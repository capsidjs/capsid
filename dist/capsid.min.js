var capsid = (function(n) {
  "use strict";
  function t(n, t) {
    if (!n) throw new Error(t);
  }
  function e(n) {
    t("string" == typeof n, "The name should be a string"),
      t(!!o[n], "The coelement of the given name is not registered: " + n);
  }
  var o = {},
    r = document,
    i = new Promise(function(n) {
      var t = function t() {
        "complete" === r.readyState &&
          (n(), r.removeEventListener("readystatechange", t));
      };
      r.addEventListener("readystatechange", t), t();
    }),
    c = r.documentElement,
    u = function(n, t) {
      var i = void 0;
      n ? (e(n), (i = [n])) : (i = Object.keys(o)),
        i.map(function(n) {
          [].map.call((t || r).querySelectorAll(o[n].sel), o[n]);
        });
    },
    a = [],
    f = function(n, t) {
      (n.$I = !0),
        (n.$N = t),
        (n.capsid = q),
        "function" == typeof n.__init__ && n.__init__();
    },
    l = function(n, t, e) {
      n.$I || f(n, e);
      var o = new n();
      return (
        (o.el = t),
        e && (t["$D" + e] = o),
        (n.$K || []).map(function(n) {
          n(t, o);
        }),
        a.forEach(function(n) {
          n(t, o);
        }),
        "function" == typeof o.__init__ && o.__init__(),
        o
      );
    },
    s = function(n, e) {
      t(
        "string" == typeof n,
        "`name` of a class component has to be a string."
      ),
        t(
          "function" == typeof e,
          "`Constructor` of a class component has to be a function"
        );
      var r = n + "-initialized",
        c = function(t, o) {
          var i = t.classList;
          i.contains(r) || (i.add(n, r), l(e, t, n));
        };
      (c.sel = "." + n + ":not(." + r + ")"),
        (o[n] = c),
        i.then(function() {
          u(n);
        });
    },
    h = function(n, o) {
      e(n);
      var r = o["$D" + n];
      return t(r, "no coelement named: " + n + ", on the dom: " + o.tagName), r;
    },
    m = function(n, t) {
      e(n), o[n](t);
    },
    v = function(n, t) {
      return m(n, t), h(n, t);
    },
    p = function(n) {
      var t = (arguments.length > 1 && void 0 !== arguments[1]
        ? arguments[1]
        : {}
      ).at;
      return function(e, o) {
        var r = e.constructor;
        r.$K = (r.$K || []).concat(function(e, r) {
          e.addEventListener(n, function(n) {
            (t &&
              ![].some.call(e.querySelectorAll(t), function(t) {
                return t === n.target || t.contains(n.target);
              })) ||
              r[o](n);
          });
        });
      };
    },
    d = p("click"),
    _ = function(n, t, e, o) {
      n.dispatchEvent(new CustomEvent(t, { detail: o, bubbles: e }));
    },
    g = function(n) {
      return function(t, e, o) {
        var r = o.value;
        o.value = function() {
          var t = this,
            e = r.apply(this, arguments),
            o = function(e) {
              return _(t.el, n, !0, e);
            };
          return e && e.then ? e.then(o) : o(e), e;
        };
      };
    };
  g.first = function(n) {
    return function(t, e, o) {
      var r = o.value;
      o.value = function() {
        return _(this.el, n, !0, arguments[0]), r.apply(this, arguments);
      };
    };
  };
  var y = c.matches || c.webkitMatchesSelector || c.msMatchesSelector,
    b = function(n) {
      return n.replace(/(?!^)[A-Z]/g, "-$&").toLowerCase();
    },
    w = function(n, t) {
      return function(e, o, r) {
        var i = t || "." + n;
        r.get = function() {
          if (y.call(this.el, i)) return h(n, this.el);
          var t = this.el.querySelectorAll(i);
          if (t.length) return h(n, t[0]);
          throw new Error(
            'wired class-component "' +
              n +
              '" is not available at ' +
              this.el.tagName +
              "(class=[" +
              this.constructor.name +
              "]"
          );
        };
      };
    },
    E = function(n, t, e) {
      if ("string" == typeof n) return w(n, t);
      w(b(t))(n, t, e);
    };
  (E.el = function(n) {
    return function(t, e, o) {
      o.get = function() {
        return this.el.querySelector(n);
      };
    };
  }),
    (E.elAll = function(n) {
      return function(t, e, o) {
        o.get = function() {
          return this.el.querySelectorAll(n);
        };
      };
    });
  var S = function n(t) {
      return "function" != typeof t
        ? function(n) {
            return s(t, n), n;
          }
        : n(b(t.name))(t);
    },
    $ = function(n, t) {
      return function(e, o, r) {
        var i = r.value;
        r.value = function() {
          var e = this,
            o = i.apply(this, arguments),
            r = [].forEach,
            c = function(o) {
              r.call(e.el.querySelectorAll(t), function(t) {
                return _(t, n, !1, o);
              });
            };
          return o && o.then ? o.then(c) : c(o), o;
        };
      };
    };
  p.click = d;
  var k = g,
    A = $,
    q = Object.freeze({
      def: s,
      prep: u,
      make: v,
      mount: l,
      get: h,
      on: p,
      emit: k,
      emits: g,
      wire: E,
      component: S,
      pub: A,
      notifies: $,
      __ccc__: o,
      pluginHooks: a
    });
  return (
    (n.def = s),
    (n.prep = u),
    (n.make = v),
    (n.mount = l),
    (n.get = h),
    (n.on = p),
    (n.emit = k),
    (n.emits = g),
    (n.wire = E),
    (n.component = S),
    (n.pub = A),
    (n.notifies = $),
    (n.__ccc__ = o),
    (n.pluginHooks = a),
    n
  );
})({});
